
<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if !IE]>&lt;!&ndash;>
<html lang="en">
<!--<![endif]-->
<head>
    <meta charset="utf-8" />
    <title>iNeedTreez | Settings</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="" name="description" />
    <meta content="" name="author" />

    <!-- ================== BEGIN BASE CSS STYLE ================== -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
    <link href="assets/plugins/jquery-ui-1.10.4/themes/base/minified/jquery-ui.min.css" rel="stylesheet" />
    <link href="assets/plugins/bootstrap-3.1.1/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/plugins/font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="assets/css/animate.min.css" rel="stylesheet" />
    <link href="assets/css/style.min.css" rel="stylesheet" />
    <link href="assets/css/style-responsive.min.css" rel="stylesheet" />
    <!-- ================== END BASE CSS STYLE ================== -->

    <!-- ================== BEGIN PAGE LEVEL STYLE ================== -->
    <link href="assets/plugins/parsley/parsley.css" rel="stylesheet" />
    <!-- ================== END PAGE LEVEL STYLE ================== -->

    <!-- ================== BEGIN BASE JS ================== -->
    <script src="assets/plugins/jquery-1.8.2/jquery-1.8.2.min.js"></script>
    <script src="assets/plugins/jquery-ui-1.10.4/ui/minified/jquery-ui.min.js"></script>
    <script src="assets/plugins/bootstrap-3.1.1/js/bootstrap.min.js"></script>
    <!--[if lt IE 9]>
    <script src="assets/crossbrowserjs/html5shiv.js"></script>
    <script src="assets/crossbrowserjs/respond.min.js"></script>
    <script src="assets/crossbrowserjs/excanvas.min.js"></script>
    <![endif]-->
    <script src="assets/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <!-- ================== END BASE JS ================== -->
    <script src="assets/plugins/parsley/parsley.js"></script>
    <style>
        textarea {resize:none;}
/*        legend.pull-left {

            color: #fff;

        }*/
/*        body {
            color: #fff;
        }*/
        .panel-body{border:1px solid;}
        .select_btn{float:right;}
        .alert-danger{display: none}
        .alert-success{display: none}
       .table>thead>tr>th{color: #fff;}
       .table-striped>tbody>tr:nth-child(odd)>td, .table-striped>tbody>tr:nth-child(odd)>th {background: #000;color: #fff;}
       .table>tbody>tr>td, .table>tbody>tr>th, .table>tfoot>tr>td, .table>tfoot>tr>th, .table>thead>tr>td, .table>thead>tr>th {color: #fff;} 
       .media-heading {
    color: #14BED7!important;
}
    </style>

</head>
<body>
    <!-- begin #page-loader -->
    <div id="page-loader" class="fade in"><span class="spinner"></span></div>
    <!-- end #page-loader -->

    <!-- begin #page-container -->
    <div id="page-container" class="fade">
        <!-- begin #header -->
        <div id="header" class="header navbar navbar-default navbar-fixed-top">

        </div>

        <div class ="common_sidebar"></div>
        <!-- end #sidebar -->
    
           <div id="content" class="content"> 
               
               
               
                 <div class="row">
                <!-- begin col-12 --> 
                 <div class="alert alert-danger fade in m-b-15"></div>
                <div class="alert alert-success fade in m-b-15"></div>
                <div class="col-md-12">

                    <div class="panel panel-inverse">
                        <div class="panel-heading">
                            <h4 class="panel-title">Contact</h4>
                        </div>
                        <div class="panel-body">
                            <div class="height-sm" data-scrollbar="true">
                                <ul class="media-list media-list-with-divider media-messaging messages">
<!--                                    <li class="media media-sm">
                                        <a href="javascript:;" class="pull-left">
                                            <img src="assets/img/user-5.jpg" alt="" class="media-object rounded-corner" />
                                        </a>
                                        <div class="media-body">
                                            <h5 class="media-heading">John Doe</h5>
                                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi id nunc non eros fermentum vestibulum ut id felis. Nunc molestie libero eget urna aliquet, vitae laoreet felis ultricies. Fusce sit amet massa malesuada, tincidunt augue vitae, gravida felis.</p> 
                                            <i class="fa fa-2x fa-mail-reply"></i>
                                            <i class="fa fa-2x fa-trash-o"></i>
                                        </div> 
                                        <div class="panel-footer">
                                            <form>
                                                <div class="input-group">
                                                    <input type="text" class="form-control bg-silver" placeholder="Enter message">
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-primary" type="button"><i class="fa fa-pencil"></i></button>
                                                    </span>
                                                </div>
                                            </form>
                                        </div>
                                    </li>-->
<!--                                    <li class="media media-sm">
                                        <a href="javascript:;" class="pull-left">
                                            <img src="assets/img/user-6.jpg" alt="" class="media-object rounded-corner" />
                                        </a>
                                        <div class="media-body">
                                            <h5 class="media-heading">Terry Ng</h5>
                                            <p>Sed in ante vel ipsum tristique euismod posuere eget nulla. Quisque ante sem, scelerisque iaculis interdum quis, eleifend id mi. Fusce congue leo nec mauris malesuada, id scelerisque sapien ultricies.</p>
                                        </div>
                                    </li>
                                    <li class="media media-sm">
                                        <a href="javascript:;" class="pull-left">
                                            <img src="assets/img/user-8.jpg" alt="" class="media-object rounded-corner" />
                                        </a>
                                        <div class="media-body">
                                            <h5 class="media-heading">Fiona Log</h5>
                                            <p>Pellentesque dictum in tortor ac blandit. Nulla rutrum eu leo vulputate ornare. Nulla a semper mi, ac lacinia sapien. Sed volutpat ornare eros, vel semper sem sagittis in. Quisque risus ipsum, iaculis quis cursus eu, tristique sed nulla.</p>
                                        </div>
                                    </li>
                                    <li class="media media-sm">
                                        <a href="javascript:;" class="pull-left">
                                            <img src="assets/img/user-7.jpg" alt="" class="media-object rounded-corner" />
                                        </a>
                                        <div class="media-body">
                                            <h5 class="media-heading">John Doe</h5>
                                            <p>Morbi molestie lorem quis accumsan elementum. Morbi condimentum nisl iaculis, laoreet risus sed, porta neque. Proin mi leo, dapibus at ligula a, aliquam consectetur metus.</p>
                                        </div>
                                    </li>-->
                                </ul>
                            </div>
                        </div>
                       
                    </div>
                </div>
            </div>
   

<!--            <div class="row"> 
                <div class="alert alert-danger fade in m-b-15"></div>
                <div class="alert alert-success fade in m-b-15"></div>
                <a class="btn btn-primary btn-xl add_contact" style="margin-bottom: 10PX;margin-left: 10px;">Add Contact</a> 
                 begin col-12 
                <div class="col-md-12">
                     begin panel 
                    <div class="panel panel-inverse">
                        <div class="panel-body">

                            <div class="table-responsive">
                                <table id="example" class="table table-striped table-bordered">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Phone</th>
                                            <th>Edit</th>
                                            <th>Delete</th>
                                        </tr>
                                    </thead>
                                    <tbody class="contact_view" > 
                                         
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                     end panel 
                </div>
                 end col-12 
            </div> -->

            <!-- modal for add ads-->
            <div class="modal fade in" id="modal-dialog-add" aria-hidden="false">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                            <h4 class="modal-title">Add Contact</h4>
                        </div>
                        <div class="modal-body">  

                            <div class="alert alert-danger fade in m-b-15"></div>
                            <div class="alert alert-success fade in m-b-15"></div>

                            <div>
                                <fieldset>
                                    <div class="row">
                                        <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="col-md-4 form-group">
                                                        <label>Contact Name</label>
                                                    </div>
                                                    <div class="col-md-8 form-group">
                                                        <input type="text" id="contact_name"/>
                                                    </div>
                                                                                                    </div>
                                        </div> 
                                         <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="col-md-4 form-group">
                                                        <label>Contact Phone Number</label>
                                                    </div>
                                                    <div class="col-md-8 form-group">
                                                        <input type="text" id="contact_phone"/>
                                                    </div>
                                                </div>
                                        </div>
                                     
                                    </div>

                                </fieldset>
                            </div> 

                        </div>
                        <div class="modal-footer">
                            <a href="javascript:;" class="btn btn-sm btn-white" data-dismiss="modal">Close</a>
                            <a href="javascript:;" class="btn btn-sm btn-success" id="add_contact_btn">Add</a>
                        </div>
                    </div>
                </div>
            </div> 
            <!-- end of modal for add ads--> 

            <!-- modal for edit menu-->
               <div class="modal fade in" id="modal-dialog-edit" aria-hidden="false">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                            <h4 class="modal-title">Edit Contact</h4>
                        </div>
                        <div class="modal-body">  

                            <div class="alert alert-danger fade in m-b-15"></div>
                            <div class="alert alert-success fade in m-b-15"></div>

                            <div>
                                <fieldset>
                                    <div class="row">
                                        <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="col-md-4 form-group">
                                                        <label>Contact Name</label>
                                                    </div>
                                                    <div class="col-md-8 form-group">
                                                        <input type="text" id="edit_contact_name"/> 
                                                       <input type="hidden" id="edit_contact_id"/>

                                                    </div>
                                                                                                    </div>
                                        </div> 
                                         <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="col-md-4 form-group">
                                                        <label>Contact Phone Number</label>
                                                    </div>
                                                    <div class="col-md-8 form-group">
                                                        <input type="text" id="edit_contact_phone"/>
                                                    </div>
                                                </div>
                                        </div>
                                     
                                    </div>

                                </fieldset>
                            </div> 

                        </div>
                        <div class="modal-footer">
                            <a href="javascript:;" class="btn btn-sm btn-white" data-dismiss="modal">Close</a>
                            <a href="javascript:;" class="btn btn-sm btn-success" id="edit_contact_btn">Add</a>
                        </div>
                    </div>
                </div>
            </div> 
            <!-- end of edit modal for add ads-->

        </div>

        <!-- begin scroll to top btn -->
        <a href="javascript:;" class="btn btn-icon btn-circle btn-success btn-scroll-to-top fade" data-click="scroll-top"><i class="fa fa-angle-up"></i></a>
        <!-- end scroll to top btn -->
    </div>
    <!-- ================== BEGIN PAGE LEVEL JS ================== -->
    <script src="assets/plugins/bootstrap-wizard/js/bwizard.js"></script>
    <script src="assets/js/form-wizards.demo.min.js"></script>
    <script src="assets/js/config.js"></script>
    <!--================== END PAGE LEVEL JS ==================-->
    <script src="assets/js/apps.min.js"></script>
    <!-- ================== END PAGE LEVEL JS ================== -->
    <script>
        $(document).ready(function() {
            App.init();
            FormWizard.init();
            $(".links-items").removeClass("active");
            $("#contacts").addClass("active");
        });
        $(window).load(function() {
            $(".links-items").removeClass("active");
            $("#contacts").addClass("active");
        });
    </script>
    <script>
        $(document).ready(function() {
                        var username = $.cookie("username")


            /* *******************************************************************************
             View All contact
             ******************************************************************************** */
            $.ajax({
                type: 'GET',
                url: globalpath + 'users/' + username + '/contacts',
                contentType: "application/json",
                beforeSend: function(xhr, settings) {
                    xhr.setRequestHeader('Authorization', 'Bearer ' + $.cookie("access_token"));
                },
                success: function(response) {
                    console.log("response_contact");
                    console.log(response);
                    if (response) {  
                        
                          var length = response.length; 
                           var str = '';
                        for (var i = 0; i < length; i++) { 
                               var id = response[i]["_id"];
                            var name = response[i]["name"];
                            var phone = response[i]["phone"];
                      str+= '<li class="media media-sm">'
//                                        str+= '<a href="javascript:;" class="pull-left">';
//                                            str+= '<img src="assets/img/user-5.jpg" alt="" class="media-object rounded-corner" />';
//                                        str+= '</a>';
                                        str+= '<div class="media-body">';
                                            str+= '<h5 class="media-heading">'+ name +'</h5>';
                                            str+= '<p>'+ phone+'</p>'; 
                                            str+= '<i class="fa fa-2x fa-trash-o delete_ad" id="' + id + '" style="cursor: pointer;float:right"></i>';
                                            str+= '<i class="fa fa-2x fa-edit edit_ad_click"id="' + id + '" myname ="'+ name+'" myphone ="'+phone +'" style="cursor: pointer;float:right;margin-right:10px;"></i>';

                                       str+= '</div>'; 
                                    str+= '</li>';   
                        } 
                        
                        $("ul.messages").html(str);
                        
                        
                        
                        
                        
                        
                        
                        
//                        var str = '';
//                        var length = response.length;
//                        for (var i = 0; i < length; i++) {
//                            var id = response[i]["_id"];
//                            var name = response[i]["name"];
//                            var phone = response[i]["phone"];
//                            str += '<tr>'
//                            str += '<td>' + name + '</td>'
//                            str += '<td>' + phone + '</td>'
//                            str += '<td><a  href="javascript:;" id="' + id + '" myname ="'+ name+'" myphone ="'+phone +'" class="btn btn-primary btn-xl edit_ad_click">Edit</a></td>';
//                            str += '<td><a href="javascript:;" class="btn btn-primary btn-xl delete_ad" id="' + id + '">Delete</a></td>';
//                            str += '</tr>'
//
//                        }
//                        $(".contact_view").html(str);

                    }
                    else {
                        showError(response["error"]);
                    }
                },
              error: function(error) { 
                     console.log("in prfile error");
                     getAccessToken();
                    console.log(error);
                    showError(error);
                }
            });


            /* *******************************************************************************
             Add a particular Contact
             ******************************************************************************** */
            $(".add_contact").click(function() { 
                console.log("huhuuh")
                $("#modal-dialog-add").modal("show");
            });
            
             $(".edit_ad_click").live("click",function() { 
                console.log("huhuuh");
               var name =  $(this).attr("myname")
               var phone =  $(this).attr("myphone")
                var id =  $(this).attr("id")
               $("#edit_contact_name").val(name);
               $("#edit_contact_phone").val(phone);
               $("#edit_contact_id").val(id);
                $("#modal-dialog-edit").modal("show");
            });
            
            
            
            $("#add_contact_btn").click(function() {
                var contact_name = $("#contact_name").val();
                var contact_phone = $("#contact_phone").val();
                if (ifBlank("Contact Name", contact_name) == false)
                    return false;
                if (ifBlank("Phone Number", contact_phone) == false)
                    return false;
                var params = {
                    "name": contact_name,
                    "phone": contact_phone
                }
                $.ajax({
                    type: 'POST',
                    url: globalpath + 'users/' + username + '/contacts',
                    contentType: "application/json",
                    data: JSON.stringify(params),
                    beforeSend: function(xhr, settings) {
                        $(".add_ads").hide();
                        xhr.setRequestHeader('Authorization', 'Bearer ' + $.cookie("access_token"));
                    },
                    success: function(response) {
                        console.log("responsemenu");
                        console.log(response);
                        showSuccess("Contact created successfully");
                        setTimeout(function() {
                            location.reload();
                        }, settimeout);


                    },
                   error: function(error) { 
                     console.log("in prfile error");
                     getAccessToken();
                    console.log(error);
                    showError(error);
                }
                });
            });  
            
            
                $("#edit_contact_btn").click(function() {
                var contact_name = $("#edit_contact_name").val();
                var contact_phone = $("#edit_contact_phone").val();
                var contact_id = $("#edit_contact_id").val();
                if (ifBlank("Contact Name", contact_name) == false)
                    return false;
                if (ifBlank("Phone Number", contact_phone) == false)
                    return false;
                var params = {
                    "name": contact_name,
                    "phone": contact_phone
                }
                $.ajax({
                    type: 'POST',
                    url: globalpath + 'users/' + username + '/contacts/'+contact_id,
                    contentType: "application/json",
                    data: JSON.stringify(params),
                    beforeSend: function(xhr, settings) {
                        $(".add_ads").hide();
                        xhr.setRequestHeader('Authorization', 'Bearer ' + $.cookie("access_token"));
                    },
                    success: function(response) {
                        console.log("responsemenu");
                        console.log(response);
                        showSuccess("Contact updated successfully");
                        setTimeout(function() {
                            location.reload();
                        }, settimeout);


                    },
                   error: function(error) { 
                     console.log("in prfile error");
                     getAccessToken();
                    console.log(error);
                    showError(error);
                }
                });
            });   
            
            
            
            
             /* *******************************************************************************
             Delete a particular Ad
             ******************************************************************************** */
            $(document).delegate('.delete_ad', 'click', function(e) {
                e.preventDefault();
                var contact_id = $(this).attr("id");
                var ch = confirm("Are you sure you want to delete this Contact?");
                if (ch == true) {
                    $.ajax({
                        type: 'DELETE',
                    url: globalpath + 'users/' + username + '/contacts/'+contact_id,
                        contentType: "application/json",
                        beforeSend: function(xhr, settings) {
                            xhr.setRequestHeader('Authorization', 'Bearer ' + $.cookie("access_token"));
                        },
                        success: function(response) {
                            console.log(response);
                            if (response['success']) {
                                showSuccess("Congratulations! Contact has been deleted successfully");
                                setTimeout(function() {
                                    location.reload();
                                }, settimeout);
                            }
                            else {
                                showError(response["error"]);
                            }
                        }
                    });
                }
            });
            
            

        });

    </script>

    <!--</body>-->
    <!--</html>-->


    <div class ="common_footer">
    </div>
