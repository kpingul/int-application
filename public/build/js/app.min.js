!function(){"use strict";angular.module("myApp",["ui.router","angular-flexslider"])}(),function(){"use strict";angular.module("myApp").run(["$rootScope","Session","$state",function(t,e,n){t.$on("$stateChangeSuccess",function(){$("html, body").animate({scrollTop:0},0),$("body").css("overflow-y","hidden")}),t.$on("$stateChangeStart",function(t,r,o,i,u){r.authenticate&&!e.checkForValidity()&&(n.transitionTo("login"),t.preventDefault())})}])}(),function(){"use strict";angular.module("myApp").config(["$urlRouterProvider","$stateProvider","$httpProvider",function(t,e,n){t.when("","/"),e.state("home",{url:"/",templateUrl:"src/js/app/home/home.tpl.html",controller:"HomeCtrl"}).state("register",{url:"/register",templateUrl:"src/js/app/register/register.tpl.html",controller:"RegisterCtrl"}).state("login",{url:"/login",templateUrl:"src/js/app/login/login.tpl.html",controller:"LoginCtrl"}).state("profile",{url:"/profile",templateUrl:"src/js/app/profile/profile.tpl.html",controller:"ProfileCtrl",authenticate:!0}),n.interceptors.push("AuthInterceptor")}])}(),function(){"use strict";angular.module("myApp").directive("activateBrickEffect",[function(){return{restrict:"A",link:function(t,e,n){function r(){e.children(u).animate({left:"0px"},i)}function o(){e.children(u).animate({left:"-100%"},i)}var i=1,u=".content";e.on("mouseover",r),e.on("mouseout",o)}}}])}(),function(){"use strict";angular.module("myApp").directive("activateTubular",[function(){return{restrict:"A",link:function(t,e,n){$(e).tubular()}}}])}(),function(){"use strict";angular.module("myApp").controller("HomeCtrl",["$scope","Session","AuthService",function(t,e,n){t.isLoggedIn=e.checkForValidity(),t.isLoggedIn&&(t.userName=e.getUserName()),t.logoutUser=function(){n.logout()}}])}(),function(){"use strict";angular.module("myApp").controller("LoginCtrl",["$scope","AuthService","$timeout","$state",function(t,e,n,r){t.successLogin=!1,t.loginUser=function(){t.successLogin=!0,e.login(t.username,t.password).then(function(e){e&&n(function(){t.successLogin=!0,r.go("home")},2e3)})["catch"](function(t){console.log(t)})}}])}(),function(){"use strict";angular.module("myApp").controller("RegisterCtrl",["$scope",function(t){}])}(),function(){"use strict";angular.module("myApp").controller("ProfileCtrl",["$scope","$http","AuthService","Session","APIService",function(t,e,n,r,o){t.images=[],t.userName=r.getUserName(),o.getBusinessAds().then(function(e){t.images=e})["catch"](function(t){}),t.logoutUser=function(){n.logout()}}])}(),function(){"use strict";angular.module("myApp").directive("activateFlexSlider",[function(){return function(t,e,n){$(".flexslider").flexslider({animation:"slide"})}}])}(),function(){"use strict";angular.module("myApp").directive("activatePrettyPhoto",[function(){return function(t,e,n){$("[rel^='prettyPhoto']").prettyPhoto(),$(".gallery:first a[rel^='prettyPhoto']").prettyPhoto({animation_speed:"normal",theme:"light_square",slideshow:3e3,autoplay_slideshow:!1})}}])}(),function(){"use strict";angular.module("myApp").directive("addOverFlow",[function(){return{restrict:"A",link:function(t,e,n){"remove"==n.data&&$("body").css("overflow-y","initial")}}}])}(),function(){"use strict";angular.module("myApp").factory("APIService",["$http",function(t){function e(){return t.get("http://ineedtreez-dev.azurewebsites.net/api/ad/55a8f91d8b70fff4391cc70e").then(function(t){return t.data})["catch"](function(t){return t})}var n={getBusinessAds:e};return n}])}(),function(){"use strict";angular.module("myApp").factory("AuthInterceptor",["$rootScope","Session",function(t,e){return{request:function(t){var n=e.getAccessToken();return n&&(t.headers.authorization="Bearer "+n),t},responseError:function(t){return 401===t.status&&console.log("unauthorized"),t}}}])}(),function(){"use strict";angular.module("myApp").factory("AuthService",["$http","$window",function(t,e){function n(n,r){return t.post("http://ineedtreez-dev.azurewebsites.net/api/auth/oauth/token",{grant_type:"password",client_id:"iNeedTreezWebv1",client_secret:"LCeerVeAGDcaHY8z4v4tXprPQv",username:n,password:r}).then(function(t){return e.localStorage.setItem("access_token",t.data.access_token),e.localStorage.setItem("username",t.data.user.username),t})["catch"](function(t){return t})}function r(){e.localStorage.removeItem("access_token"),e.localStorage.removeItem("username")}var o={login:n,logout:r};return o}])}(),function(){"use strict";angular.module("myApp").factory("Session",[function(){function t(){return localStorage.getItem("access_token")?!0:!1}function e(){return localStorage.getItem("username")}function n(){return localStorage.getItem("access_token")}var r={checkForValidity:t,getUserName:e,getAccessToken:n};return r}])}();